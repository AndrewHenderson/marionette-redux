{"version":3,"file":"marionette-redux.js","sources":["src/mapStateToProps.js","src/mapDispatchToProps.js","src/mergeProps.js","src/isDisplayComponent.js","src/mixin.js","src/connect.js","src/marionette-redux.js"],"sourcesContent":["export default function mapStateToProps() {\n  return {}\n}\n","export default function mapDispatchToProps(dispatch) {\n  return {\n    dispatch: dispatch\n  }\n}\n","import { extend } from 'underscore';\nexport default function mergeProps(stateProps, dispatchProps, parentProps) {\n  return extend({}, parentProps, stateProps, dispatchProps)\n}\n","import { isObject, isFunction } from 'underscore'\nimport { View, Behavior } from 'marionette'\n\nexport default function isDisplayComponent(Component) {\n  if (isFunction(Component)) {\n    return Component.prototype instanceof View || Component.prototype instanceof Behavior\n  }\n  if (isObject(Component)) {\n    return Component instanceof View || Component instanceof Behavior\n  }\n  return false\n}\n","import {\n  extend,\n  defaults,\n  clone,\n  each,\n  isEqual,\n  isFunction,\n  isObject\n} from 'underscore';\nimport {\n  bindEvents,\n  bindEntityEvents,\n  unbindEvents,\n  unbindEntityEvents\n} from 'marionette';\nimport defaultMapStateToProps from './mapStateToProps';\nimport defaultMapDispatchToProps from './mapDispatchToProps';\nimport defaultMergeProps from './mergeProps';\nimport isDisplayComponent from './isDisplayComponent';\n\nconst mixin = {\n\n  initialize(_options) {\n\n    const options = _options || {};\n\n    this.mapState = options.mapStateToProps || this.mapStateToProps || defaultMapStateToProps;\n    this.mapDispatch = options.mapDispatchToProps || this.mapDispatchToProps || defaultMapDispatchToProps;\n    this.mergeProps = options.mergeProps || this.mergeProps || defaultMergeProps;\n    this.props = this.props || {};\n\n    if (options.props) {\n      extend(this.props, options.props)\n    }\n\n    this.store = options.store || this.store;\n\n    if (!this.store && window && window.store) {\n      this.store = window.store\n    }\n\n    const storeState = this.store.getState();\n    this.state = defaults({\n      storeState: storeState\n    }, this.getInitialState());\n\n    this.bindStateEvents();\n    this.clearCache();\n\n    if (!isDisplayComponent(this)) {\n      this.trySubscribe()\n    }\n  },\n\n  getInitialState() {\n    return {}\n  },\n\n  setState(key, val, options) {\n\n    if (key == null) {\n      return this;\n    }\n\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    let state;\n    if (isObject(key)) {\n      state = key;\n      options = val;\n    } else {\n      (state = {})[key] = val;\n    }\n\n    options || (options = {});\n\n    // Extract state and options.\n    const unset      = options.unset;\n    const silent     = options.silent;\n    const changes    = [];\n    const changing   = this._changing;\n    this._changing = true;\n\n    if (!changing) {\n      this._previousState = clone(this.state);\n      this.changed = {};\n    }\n\n    const current = this.state;\n    const changed = this.changed;\n    const prev    = this._previousState;\n\n    // For each `set` state, update or delete the current value.\n    each(state, function(_val, _key) {\n      if (!isEqual(current[_key], _val)) {\n        changes.push(_key);\n      }\n      if (!isEqual(prev[_key], _val)) {\n        changed[_key] = _val;\n      } else {\n        delete changed[_key];\n      }\n      unset ? delete current[_key] : current[_key] = _val;\n    });\n\n    // Trigger all relevant state changes.\n    if (!silent) {\n      if (changes.length) {\n        this._pending = options;\n      }\n      for (let i = 0; i < changes.length; i++) {\n        this.trigger('change:' + changes[i], this, current[changes[i]], options);\n      }\n    }\n\n    // You might be wondering why there's a `while` loop here. Changes can\n    // be recursively nested within `\"change\"` events.\n    if (changing) {\n      return this;\n    }\n    if (!silent) {\n      while (this._pending) {\n        options = this._pending;\n        this._pending = false;\n        this.trigger('change', this, options);\n        if (isDisplayComponent(this) && this.triggerDomRefresh !== false) {\n          this.triggerMethod('dom:refresh');\n        }\n      }\n    }\n    this._pending = false;\n    this._changing = false;\n    return this\n  },\n\n  getState(attr) {\n    return this.state[attr]\n  },\n\n  bindStateEvents() {\n    const bind = bindEvents || bindEntityEvents;\n    if (this.stateEvents) {\n      bind(this, this, this.stateEvents)\n    }\n  },\n\n  unbindStateEvents() {\n    const unbind = unbindEvents || unbindEntityEvents;\n    if (this.stateEvents) {\n      unbind(this, this, this.stateEvents)\n    }\n  },\n\n  computeStateProps(store, props) {\n    if (!this.finalMapStateToProps) {\n      return this.configureFinalMapState(store, props)\n    }\n\n    const state = store.getState();\n    const stateProps = this.doStatePropsDependOnOwnProps ?\n      this.finalMapStateToProps(state, props) :\n      this.finalMapStateToProps(state);\n\n    return stateProps\n  },\n\n  configureFinalMapState(store, props) {\n    const mappedState = this.mapState(store.getState(), props);\n    const isFactory = isFunction(mappedState);\n\n    this.finalMapStateToProps = isFactory ? mappedState : this.mapState;\n    this.doStatePropsDependOnOwnProps = this.finalMapStateToProps.length !== 1;\n\n    if (isFactory) {\n      return this.computeStateProps(store, props)\n    }\n\n    return mappedState\n  },\n\n  updateStatePropsIfNeeded() {\n    const nextStateProps = this.computeStateProps(this.store, this.props);\n    if (this.stateProps && isEqual(nextStateProps, this.stateProps)) {\n      return false\n    }\n\n    this.stateProps = nextStateProps;\n\n    return true\n  },\n\n  computeDispatchProps(store, props) {\n    if (!this.finalMapDispatchToProps) {\n      return this.configureFinalMapDispatch(store, props)\n    }\n\n    const dispatch = store.dispatch;\n    const dispatchProps = this.doDispatchPropsDependOnOwnProps ?\n      this.finalMapDispatchToProps(dispatch, props) :\n      this.finalMapDispatchToProps(dispatch);\n\n    return dispatchProps\n  },\n\n  configureFinalMapDispatch(store, props) {\n    const mappedDispatch = this.mapDispatch(store.dispatch, props);\n    const isFactory = isFunction(mappedDispatch);\n\n    this.finalMapDispatchToProps = isFactory ? mappedDispatch : this.mapDispatch;\n    this.doDispatchPropsDependOnOwnProps = this.finalMapDispatchToProps.length !== 1;\n\n    if (isFactory) {\n      return this.computeDispatchProps(store, props)\n    }\n\n    return mappedDispatch\n  },\n\n  updateDispatchPropsIfNeeded() {\n    const nextDispatchProps = this.computeDispatchProps(this.store, this.props);\n    if (this.dispatchProps && isEqual(nextDispatchProps, this.dispatchProps)) {\n      return false\n    }\n\n    this.dispatchProps = nextDispatchProps;\n\n    return true\n  },\n\n  isSubscribed() {\n    return isFunction(this.unsubscribe)\n  },\n\n  trySubscribe() {\n    if (!this.isSubscribed()) {\n      this.unsubscribe = this.store.subscribe(this.handleChange.bind(this));\n      this.handleDispatchProps();\n      this.handleChange()\n    }\n  },\n\n  tryUnsubscribe() {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n      this.unsubscribe = null\n    }\n  },\n\n  onRender() {\n    this.trySubscribe()\n  },\n\n  onDestroy() {\n    this.tryUnsubscribe();\n    this.unbindStateEvents();\n    this.clearCache()\n  },\n\n  clearCache() {\n    this.dispatchProps = null;\n    this.stateProps = null;\n    this.finalMapDispatchToProps = null;\n    this.finalMapStateToProps = null;\n    this.haveInitialStatePropsBeenDetermined = false;\n    this.haveInitialDispatchPropsBeenDetermined = false\n  },\n\n  handleDispatchProps() {\n    if (!this.haveInitialDispatchPropsBeenDetermined) {\n      this.updateDispatchPropsIfNeeded();\n      this.haveInitialDispatchPropsBeenDetermined = true\n    }\n  },\n\n  handleChange() {\n    if (!this.unsubscribe) {\n      return\n    }\n\n    const storeState = this.store.getState();\n    const prevStoreState = this.getState('storeState');\n    if (this.haveInitialStatePropsBeenDetermined && isEqual(prevStoreState, storeState)) {\n      return\n    }\n\n    const haveStatePropsChanged = this.updateStatePropsIfNeeded();\n    this.haveInitialStatePropsBeenDetermined = true;\n\n    if (haveStatePropsChanged) {\n\n      const mergedProps = this.mergeProps(this.stateProps, this.dispatchProps, this.props);\n      this.props = mergedProps;\n\n      isFunction(this.componentWillReceiveProps) && this.componentWillReceiveProps(mergedProps);\n\n      if (isDisplayComponent(this) && this.triggerDomRefresh !== false) {\n        this.triggerMethod('dom:refresh');\n      }\n    }\n\n    this.setState({\n      storeState\n    })\n  }\n};\n\nexport default mixin;\n","import { defaults, omit } from 'underscore';\nimport defaultMapStateToProps from './mapStateToProps'\nimport defaultMapDispatchToProps from './mapDispatchToProps'\nimport defaultMergeProps from './mergeProps'\nimport mixin from './mixin'\nimport isDisplayComponent from './isDisplayComponent';\n\nexport default function connect(_mapStateToProps, _mapDispatchToProps, _mergeProps, _options) {\n\n  const options = _options || {};\n\n  return function(Component) {\n\n    const mapStateToProps = _mapStateToProps || Component.prototype.mapStateToProps || defaultMapStateToProps;\n    const mapDispatchToProps = _mapDispatchToProps || Component.prototype.mapDispatchToProps || defaultMapDispatchToProps;\n    const mergeProps = _mergeProps || Component.prototype.mergeProps || defaultMergeProps;\n    const store = options.store || Component.prototype.store;\n    const componentInitialize = Component.prototype.initialize;\n    const componentOnRender = Component.prototype.onRender;\n    const componentOnDestroy = Component.prototype.onDestroy;\n\n    let connectMixin = defaults({}, {\n\n      initialize(_initOptions) {\n\n        const initOptions = _initOptions || {};\n\n        mixin.initialize.call(this, {\n          mapStateToProps,\n          mapDispatchToProps,\n          mergeProps,\n          store,\n          props: initOptions.props\n        });\n\n        if (componentInitialize) {\n          componentInitialize.apply(this, arguments);\n        }\n      },\n\n      onRender() {\n\n        mixin.onRender.apply(this, arguments);\n\n        if (componentOnRender) {\n          componentOnRender.apply(this, arguments)\n        }\n      },\n\n      onDestroy() {\n\n        mixin.onDestroy.apply(this, arguments);\n\n        if (componentOnDestroy) {\n          componentOnDestroy.apply(this, arguments);\n        }\n      }\n    }, mixin);\n\n    if (!isDisplayComponent(Component)) {\n      connectMixin = omit(connectMixin, 'onRender')\n    }\n\n    return Component.extend(connectMixin)\n  }\n}\n","import connect from './connect'\nimport mixin from './mixin'\nimport { version as VERSION } from '../package.json'\n\nconst MarionetteRedux = {\n  connect,\n  mixin,\n  VERSION\n}\n\nexport default MarionetteRedux\n"],"names":["mapStateToProps","mapDispatchToProps","dispatch","mergeProps","stateProps","dispatchProps","parentProps","extend","isDisplayComponent","Component","isFunction","prototype","View","Behavior","isObject","mixin","_options","options","mapState","defaultMapStateToProps","mapDispatch","defaultMapDispatchToProps","defaultMergeProps","props","store","window","storeState","getState","state","defaults","getInitialState","bindStateEvents","clearCache","trySubscribe","key","val","unset","silent","changes","changing","_changing","_previousState","clone","changed","current","prev","_val","_key","isEqual","push","length","_pending","i","trigger","triggerDomRefresh","triggerMethod","attr","bind","bindEvents","bindEntityEvents","stateEvents","unbind","unbindEvents","unbindEntityEvents","finalMapStateToProps","configureFinalMapState","doStatePropsDependOnOwnProps","mappedState","isFactory","computeStateProps","nextStateProps","finalMapDispatchToProps","configureFinalMapDispatch","doDispatchPropsDependOnOwnProps","mappedDispatch","computeDispatchProps","nextDispatchProps","unsubscribe","isSubscribed","subscribe","handleChange","handleDispatchProps","tryUnsubscribe","unbindStateEvents","haveInitialStatePropsBeenDetermined","haveInitialDispatchPropsBeenDetermined","updateDispatchPropsIfNeeded","prevStoreState","haveStatePropsChanged","updateStatePropsIfNeeded","mergedProps","componentWillReceiveProps","setState","connect","_mapStateToProps","_mapDispatchToProps","_mergeProps","componentInitialize","initialize","componentOnRender","onRender","componentOnDestroy","onDestroy","connectMixin","_initOptions","initOptions","call","apply","arguments","omit","MarionetteRedux"],"mappings":"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","preExisting":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmRyZXdoZW5kZXJzb24vbWFyaW9uZXR0ZS1yZWR1eC9zcmMvbWFwU3RhdGVUb1Byb3BzLmpzIiwiL1VzZXJzL2FuZHJld2hlbmRlcnNvbi9tYXJpb25ldHRlLXJlZHV4L3NyYy9tYXBEaXNwYXRjaFRvUHJvcHMuanMiLCIvVXNlcnMvYW5kcmV3aGVuZGVyc29uL21hcmlvbmV0dGUtcmVkdXgvc3JjL21lcmdlUHJvcHMuanMiLCIvVXNlcnMvYW5kcmV3aGVuZGVyc29uL21hcmlvbmV0dGUtcmVkdXgvc3JjL2lzRGlzcGxheUNvbXBvbmVudC5qcyIsIi9Vc2Vycy9hbmRyZXdoZW5kZXJzb24vbWFyaW9uZXR0ZS1yZWR1eC9zcmMvbWl4aW4uanMiLCIvVXNlcnMvYW5kcmV3aGVuZGVyc29uL21hcmlvbmV0dGUtcmVkdXgvc3JjL2Nvbm5lY3QuanMiLCIvVXNlcnMvYW5kcmV3aGVuZGVyc29uL21hcmlvbmV0dGUtcmVkdXgvc3JjL21hcmlvbmV0dGUtcmVkdXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKCkge1xuICByZXR1cm4ge31cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICByZXR1cm4ge1xuICAgIGRpc3BhdGNoOiBkaXNwYXRjaFxuICB9XG59XG4iLCJpbXBvcnQgeyBleHRlbmQgfSBmcm9tICd1bmRlcnNjb3JlJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlUHJvcHMoc3RhdGVQcm9wcywgZGlzcGF0Y2hQcm9wcywgcGFyZW50UHJvcHMpIHtcbiAgcmV0dXJuIGV4dGVuZCh7fSwgcGFyZW50UHJvcHMsIHN0YXRlUHJvcHMsIGRpc3BhdGNoUHJvcHMpXG59XG4iLCJpbXBvcnQgeyBpc09iamVjdCwgaXNGdW5jdGlvbiB9IGZyb20gJ3VuZGVyc2NvcmUnXG5pbXBvcnQgeyBWaWV3LCBCZWhhdmlvciB9IGZyb20gJ21hcmlvbmV0dGUnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzRGlzcGxheUNvbXBvbmVudChDb21wb25lbnQpIHtcbiAgaWYgKGlzRnVuY3Rpb24oQ29tcG9uZW50KSkge1xuICAgIHJldHVybiBDb21wb25lbnQucHJvdG90eXBlIGluc3RhbmNlb2YgVmlldyB8fCBDb21wb25lbnQucHJvdG90eXBlIGluc3RhbmNlb2YgQmVoYXZpb3JcbiAgfVxuICBpZiAoaXNPYmplY3QoQ29tcG9uZW50KSkge1xuICAgIHJldHVybiBDb21wb25lbnQgaW5zdGFuY2VvZiBWaWV3IHx8IENvbXBvbmVudCBpbnN0YW5jZW9mIEJlaGF2aW9yXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG4iLCJpbXBvcnQge1xuICBleHRlbmQsXG4gIGRlZmF1bHRzLFxuICBjbG9uZSxcbiAgZWFjaCxcbiAgaXNFcXVhbCxcbiAgaXNGdW5jdGlvbixcbiAgaXNPYmplY3Rcbn0gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge1xuICBiaW5kRXZlbnRzLFxuICBiaW5kRW50aXR5RXZlbnRzLFxuICB1bmJpbmRFdmVudHMsXG4gIHVuYmluZEVudGl0eUV2ZW50c1xufSBmcm9tICdtYXJpb25ldHRlJztcbmltcG9ydCBkZWZhdWx0TWFwU3RhdGVUb1Byb3BzIGZyb20gJy4vbWFwU3RhdGVUb1Byb3BzJztcbmltcG9ydCBkZWZhdWx0TWFwRGlzcGF0Y2hUb1Byb3BzIGZyb20gJy4vbWFwRGlzcGF0Y2hUb1Byb3BzJztcbmltcG9ydCBkZWZhdWx0TWVyZ2VQcm9wcyBmcm9tICcuL21lcmdlUHJvcHMnO1xuaW1wb3J0IGlzRGlzcGxheUNvbXBvbmVudCBmcm9tICcuL2lzRGlzcGxheUNvbXBvbmVudCc7XG5cbmNvbnN0IG1peGluID0ge1xuXG4gIGluaXRpYWxpemUoX29wdGlvbnMpIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBfb3B0aW9ucyB8fCB7fTtcblxuICAgIHRoaXMubWFwU3RhdGUgPSBvcHRpb25zLm1hcFN0YXRlVG9Qcm9wcyB8fCB0aGlzLm1hcFN0YXRlVG9Qcm9wcyB8fCBkZWZhdWx0TWFwU3RhdGVUb1Byb3BzO1xuICAgIHRoaXMubWFwRGlzcGF0Y2ggPSBvcHRpb25zLm1hcERpc3BhdGNoVG9Qcm9wcyB8fCB0aGlzLm1hcERpc3BhdGNoVG9Qcm9wcyB8fCBkZWZhdWx0TWFwRGlzcGF0Y2hUb1Byb3BzO1xuICAgIHRoaXMubWVyZ2VQcm9wcyA9IG9wdGlvbnMubWVyZ2VQcm9wcyB8fCB0aGlzLm1lcmdlUHJvcHMgfHwgZGVmYXVsdE1lcmdlUHJvcHM7XG4gICAgdGhpcy5wcm9wcyA9IHRoaXMucHJvcHMgfHwge307XG5cbiAgICBpZiAob3B0aW9ucy5wcm9wcykge1xuICAgICAgZXh0ZW5kKHRoaXMucHJvcHMsIG9wdGlvbnMucHJvcHMpXG4gICAgfVxuXG4gICAgdGhpcy5zdG9yZSA9IG9wdGlvbnMuc3RvcmUgfHwgdGhpcy5zdG9yZTtcblxuICAgIGlmICghdGhpcy5zdG9yZSAmJiB3aW5kb3cgJiYgd2luZG93LnN0b3JlKSB7XG4gICAgICB0aGlzLnN0b3JlID0gd2luZG93LnN0b3JlXG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcmVTdGF0ZSA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICB0aGlzLnN0YXRlID0gZGVmYXVsdHMoe1xuICAgICAgc3RvcmVTdGF0ZTogc3RvcmVTdGF0ZVxuICAgIH0sIHRoaXMuZ2V0SW5pdGlhbFN0YXRlKCkpO1xuXG4gICAgdGhpcy5iaW5kU3RhdGVFdmVudHMoKTtcbiAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcblxuICAgIGlmICghaXNEaXNwbGF5Q29tcG9uZW50KHRoaXMpKSB7XG4gICAgICB0aGlzLnRyeVN1YnNjcmliZSgpXG4gICAgfVxuICB9LFxuXG4gIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge31cbiAgfSxcblxuICBzZXRTdGF0ZShrZXksIHZhbCwgb3B0aW9ucykge1xuXG4gICAgaWYgKGtleSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgIGxldCBzdGF0ZTtcbiAgICBpZiAoaXNPYmplY3Qoa2V5KSkge1xuICAgICAgc3RhdGUgPSBrZXk7XG4gICAgICBvcHRpb25zID0gdmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICAoc3RhdGUgPSB7fSlba2V5XSA9IHZhbDtcbiAgICB9XG5cbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgLy8gRXh0cmFjdCBzdGF0ZSBhbmQgb3B0aW9ucy5cbiAgICBjb25zdCB1bnNldCAgICAgID0gb3B0aW9ucy51bnNldDtcbiAgICBjb25zdCBzaWxlbnQgICAgID0gb3B0aW9ucy5zaWxlbnQ7XG4gICAgY29uc3QgY2hhbmdlcyAgICA9IFtdO1xuICAgIGNvbnN0IGNoYW5naW5nICAgPSB0aGlzLl9jaGFuZ2luZztcbiAgICB0aGlzLl9jaGFuZ2luZyA9IHRydWU7XG5cbiAgICBpZiAoIWNoYW5naW5nKSB7XG4gICAgICB0aGlzLl9wcmV2aW91c1N0YXRlID0gY2xvbmUodGhpcy5zdGF0ZSk7XG4gICAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBjaGFuZ2VkID0gdGhpcy5jaGFuZ2VkO1xuICAgIGNvbnN0IHByZXYgICAgPSB0aGlzLl9wcmV2aW91c1N0YXRlO1xuXG4gICAgLy8gRm9yIGVhY2ggYHNldGAgc3RhdGUsIHVwZGF0ZSBvciBkZWxldGUgdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgZWFjaChzdGF0ZSwgZnVuY3Rpb24oX3ZhbCwgX2tleSkge1xuICAgICAgaWYgKCFpc0VxdWFsKGN1cnJlbnRbX2tleV0sIF92YWwpKSB7XG4gICAgICAgIGNoYW5nZXMucHVzaChfa2V5KTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNFcXVhbChwcmV2W19rZXldLCBfdmFsKSkge1xuICAgICAgICBjaGFuZ2VkW19rZXldID0gX3ZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSBjaGFuZ2VkW19rZXldO1xuICAgICAgfVxuICAgICAgdW5zZXQgPyBkZWxldGUgY3VycmVudFtfa2V5XSA6IGN1cnJlbnRbX2tleV0gPSBfdmFsO1xuICAgIH0pO1xuXG4gICAgLy8gVHJpZ2dlciBhbGwgcmVsZXZhbnQgc3RhdGUgY2hhbmdlcy5cbiAgICBpZiAoIXNpbGVudCkge1xuICAgICAgaWYgKGNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3BlbmRpbmcgPSBvcHRpb25zO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlOicgKyBjaGFuZ2VzW2ldLCB0aGlzLCBjdXJyZW50W2NoYW5nZXNbaV1dLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBZb3UgbWlnaHQgYmUgd29uZGVyaW5nIHdoeSB0aGVyZSdzIGEgYHdoaWxlYCBsb29wIGhlcmUuIENoYW5nZXMgY2FuXG4gICAgLy8gYmUgcmVjdXJzaXZlbHkgbmVzdGVkIHdpdGhpbiBgXCJjaGFuZ2VcImAgZXZlbnRzLlxuICAgIGlmIChjaGFuZ2luZykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmICghc2lsZW50KSB7XG4gICAgICB3aGlsZSAodGhpcy5fcGVuZGluZykge1xuICAgICAgICBvcHRpb25zID0gdGhpcy5fcGVuZGluZztcbiAgICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoaXNEaXNwbGF5Q29tcG9uZW50KHRoaXMpICYmIHRoaXMudHJpZ2dlckRvbVJlZnJlc2ggIT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdkb206cmVmcmVzaCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9jaGFuZ2luZyA9IGZhbHNlO1xuICAgIHJldHVybiB0aGlzXG4gIH0sXG5cbiAgZ2V0U3RhdGUoYXR0cikge1xuICAgIHJldHVybiB0aGlzLnN0YXRlW2F0dHJdXG4gIH0sXG5cbiAgYmluZFN0YXRlRXZlbnRzKCkge1xuICAgIGNvbnN0IGJpbmQgPSBiaW5kRXZlbnRzIHx8IGJpbmRFbnRpdHlFdmVudHM7XG4gICAgaWYgKHRoaXMuc3RhdGVFdmVudHMpIHtcbiAgICAgIGJpbmQodGhpcywgdGhpcywgdGhpcy5zdGF0ZUV2ZW50cylcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kU3RhdGVFdmVudHMoKSB7XG4gICAgY29uc3QgdW5iaW5kID0gdW5iaW5kRXZlbnRzIHx8IHVuYmluZEVudGl0eUV2ZW50cztcbiAgICBpZiAodGhpcy5zdGF0ZUV2ZW50cykge1xuICAgICAgdW5iaW5kKHRoaXMsIHRoaXMsIHRoaXMuc3RhdGVFdmVudHMpXG4gICAgfVxuICB9LFxuXG4gIGNvbXB1dGVTdGF0ZVByb3BzKHN0b3JlLCBwcm9wcykge1xuICAgIGlmICghdGhpcy5maW5hbE1hcFN0YXRlVG9Qcm9wcykge1xuICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJlRmluYWxNYXBTdGF0ZShzdG9yZSwgcHJvcHMpXG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHN0YXRlUHJvcHMgPSB0aGlzLmRvU3RhdGVQcm9wc0RlcGVuZE9uT3duUHJvcHMgP1xuICAgICAgdGhpcy5maW5hbE1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSwgcHJvcHMpIDpcbiAgICAgIHRoaXMuZmluYWxNYXBTdGF0ZVRvUHJvcHMoc3RhdGUpO1xuXG4gICAgcmV0dXJuIHN0YXRlUHJvcHNcbiAgfSxcblxuICBjb25maWd1cmVGaW5hbE1hcFN0YXRlKHN0b3JlLCBwcm9wcykge1xuICAgIGNvbnN0IG1hcHBlZFN0YXRlID0gdGhpcy5tYXBTdGF0ZShzdG9yZS5nZXRTdGF0ZSgpLCBwcm9wcyk7XG4gICAgY29uc3QgaXNGYWN0b3J5ID0gaXNGdW5jdGlvbihtYXBwZWRTdGF0ZSk7XG5cbiAgICB0aGlzLmZpbmFsTWFwU3RhdGVUb1Byb3BzID0gaXNGYWN0b3J5ID8gbWFwcGVkU3RhdGUgOiB0aGlzLm1hcFN0YXRlO1xuICAgIHRoaXMuZG9TdGF0ZVByb3BzRGVwZW5kT25Pd25Qcm9wcyA9IHRoaXMuZmluYWxNYXBTdGF0ZVRvUHJvcHMubGVuZ3RoICE9PSAxO1xuXG4gICAgaWYgKGlzRmFjdG9yeSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZVN0YXRlUHJvcHMoc3RvcmUsIHByb3BzKVxuICAgIH1cblxuICAgIHJldHVybiBtYXBwZWRTdGF0ZVxuICB9LFxuXG4gIHVwZGF0ZVN0YXRlUHJvcHNJZk5lZWRlZCgpIHtcbiAgICBjb25zdCBuZXh0U3RhdGVQcm9wcyA9IHRoaXMuY29tcHV0ZVN0YXRlUHJvcHModGhpcy5zdG9yZSwgdGhpcy5wcm9wcyk7XG4gICAgaWYgKHRoaXMuc3RhdGVQcm9wcyAmJiBpc0VxdWFsKG5leHRTdGF0ZVByb3BzLCB0aGlzLnN0YXRlUHJvcHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlUHJvcHMgPSBuZXh0U3RhdGVQcm9wcztcblxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgY29tcHV0ZURpc3BhdGNoUHJvcHMoc3RvcmUsIHByb3BzKSB7XG4gICAgaWYgKCF0aGlzLmZpbmFsTWFwRGlzcGF0Y2hUb1Byb3BzKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25maWd1cmVGaW5hbE1hcERpc3BhdGNoKHN0b3JlLCBwcm9wcylcbiAgICB9XG5cbiAgICBjb25zdCBkaXNwYXRjaCA9IHN0b3JlLmRpc3BhdGNoO1xuICAgIGNvbnN0IGRpc3BhdGNoUHJvcHMgPSB0aGlzLmRvRGlzcGF0Y2hQcm9wc0RlcGVuZE9uT3duUHJvcHMgP1xuICAgICAgdGhpcy5maW5hbE1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCwgcHJvcHMpIDpcbiAgICAgIHRoaXMuZmluYWxNYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpO1xuXG4gICAgcmV0dXJuIGRpc3BhdGNoUHJvcHNcbiAgfSxcblxuICBjb25maWd1cmVGaW5hbE1hcERpc3BhdGNoKHN0b3JlLCBwcm9wcykge1xuICAgIGNvbnN0IG1hcHBlZERpc3BhdGNoID0gdGhpcy5tYXBEaXNwYXRjaChzdG9yZS5kaXNwYXRjaCwgcHJvcHMpO1xuICAgIGNvbnN0IGlzRmFjdG9yeSA9IGlzRnVuY3Rpb24obWFwcGVkRGlzcGF0Y2gpO1xuXG4gICAgdGhpcy5maW5hbE1hcERpc3BhdGNoVG9Qcm9wcyA9IGlzRmFjdG9yeSA/IG1hcHBlZERpc3BhdGNoIDogdGhpcy5tYXBEaXNwYXRjaDtcbiAgICB0aGlzLmRvRGlzcGF0Y2hQcm9wc0RlcGVuZE9uT3duUHJvcHMgPSB0aGlzLmZpbmFsTWFwRGlzcGF0Y2hUb1Byb3BzLmxlbmd0aCAhPT0gMTtcblxuICAgIGlmIChpc0ZhY3RvcnkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVEaXNwYXRjaFByb3BzKHN0b3JlLCBwcm9wcylcbiAgICB9XG5cbiAgICByZXR1cm4gbWFwcGVkRGlzcGF0Y2hcbiAgfSxcblxuICB1cGRhdGVEaXNwYXRjaFByb3BzSWZOZWVkZWQoKSB7XG4gICAgY29uc3QgbmV4dERpc3BhdGNoUHJvcHMgPSB0aGlzLmNvbXB1dGVEaXNwYXRjaFByb3BzKHRoaXMuc3RvcmUsIHRoaXMucHJvcHMpO1xuICAgIGlmICh0aGlzLmRpc3BhdGNoUHJvcHMgJiYgaXNFcXVhbChuZXh0RGlzcGF0Y2hQcm9wcywgdGhpcy5kaXNwYXRjaFByb3BzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5kaXNwYXRjaFByb3BzID0gbmV4dERpc3BhdGNoUHJvcHM7XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxuXG4gIGlzU3Vic2NyaWJlZCgpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbih0aGlzLnVuc3Vic2NyaWJlKVxuICB9LFxuXG4gIHRyeVN1YnNjcmliZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNTdWJzY3JpYmVkKCkpIHtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSB0aGlzLnN0b3JlLnN1YnNjcmliZSh0aGlzLmhhbmRsZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMuaGFuZGxlRGlzcGF0Y2hQcm9wcygpO1xuICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKVxuICAgIH1cbiAgfSxcblxuICB0cnlVbnN1YnNjcmliZSgpIHtcbiAgICBpZiAodGhpcy51bnN1YnNjcmliZSkge1xuICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy51bnN1YnNjcmliZSA9IG51bGxcbiAgICB9XG4gIH0sXG5cbiAgb25SZW5kZXIoKSB7XG4gICAgdGhpcy50cnlTdWJzY3JpYmUoKVxuICB9LFxuXG4gIG9uRGVzdHJveSgpIHtcbiAgICB0aGlzLnRyeVVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy51bmJpbmRTdGF0ZUV2ZW50cygpO1xuICAgIHRoaXMuY2xlYXJDYWNoZSgpXG4gIH0sXG5cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLmRpc3BhdGNoUHJvcHMgPSBudWxsO1xuICAgIHRoaXMuc3RhdGVQcm9wcyA9IG51bGw7XG4gICAgdGhpcy5maW5hbE1hcERpc3BhdGNoVG9Qcm9wcyA9IG51bGw7XG4gICAgdGhpcy5maW5hbE1hcFN0YXRlVG9Qcm9wcyA9IG51bGw7XG4gICAgdGhpcy5oYXZlSW5pdGlhbFN0YXRlUHJvcHNCZWVuRGV0ZXJtaW5lZCA9IGZhbHNlO1xuICAgIHRoaXMuaGF2ZUluaXRpYWxEaXNwYXRjaFByb3BzQmVlbkRldGVybWluZWQgPSBmYWxzZVxuICB9LFxuXG4gIGhhbmRsZURpc3BhdGNoUHJvcHMoKSB7XG4gICAgaWYgKCF0aGlzLmhhdmVJbml0aWFsRGlzcGF0Y2hQcm9wc0JlZW5EZXRlcm1pbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BhdGNoUHJvcHNJZk5lZWRlZCgpO1xuICAgICAgdGhpcy5oYXZlSW5pdGlhbERpc3BhdGNoUHJvcHNCZWVuRGV0ZXJtaW5lZCA9IHRydWVcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlQ2hhbmdlKCkge1xuICAgIGlmICghdGhpcy51bnN1YnNjcmliZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcmVTdGF0ZSA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBwcmV2U3RvcmVTdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoJ3N0b3JlU3RhdGUnKTtcbiAgICBpZiAodGhpcy5oYXZlSW5pdGlhbFN0YXRlUHJvcHNCZWVuRGV0ZXJtaW5lZCAmJiBpc0VxdWFsKHByZXZTdG9yZVN0YXRlLCBzdG9yZVN0YXRlKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgaGF2ZVN0YXRlUHJvcHNDaGFuZ2VkID0gdGhpcy51cGRhdGVTdGF0ZVByb3BzSWZOZWVkZWQoKTtcbiAgICB0aGlzLmhhdmVJbml0aWFsU3RhdGVQcm9wc0JlZW5EZXRlcm1pbmVkID0gdHJ1ZTtcblxuICAgIGlmIChoYXZlU3RhdGVQcm9wc0NoYW5nZWQpIHtcblxuICAgICAgY29uc3QgbWVyZ2VkUHJvcHMgPSB0aGlzLm1lcmdlUHJvcHModGhpcy5zdGF0ZVByb3BzLCB0aGlzLmRpc3BhdGNoUHJvcHMsIHRoaXMucHJvcHMpO1xuICAgICAgdGhpcy5wcm9wcyA9IG1lcmdlZFByb3BzO1xuXG4gICAgICBpc0Z1bmN0aW9uKHRoaXMuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykgJiYgdGhpcy5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG1lcmdlZFByb3BzKTtcblxuICAgICAgaWYgKGlzRGlzcGxheUNvbXBvbmVudCh0aGlzKSAmJiB0aGlzLnRyaWdnZXJEb21SZWZyZXNoICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2RvbTpyZWZyZXNoJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzdG9yZVN0YXRlXG4gICAgfSlcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbWl4aW47XG4iLCJpbXBvcnQgeyBkZWZhdWx0cywgb21pdCB9IGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGRlZmF1bHRNYXBTdGF0ZVRvUHJvcHMgZnJvbSAnLi9tYXBTdGF0ZVRvUHJvcHMnXG5pbXBvcnQgZGVmYXVsdE1hcERpc3BhdGNoVG9Qcm9wcyBmcm9tICcuL21hcERpc3BhdGNoVG9Qcm9wcydcbmltcG9ydCBkZWZhdWx0TWVyZ2VQcm9wcyBmcm9tICcuL21lcmdlUHJvcHMnXG5pbXBvcnQgbWl4aW4gZnJvbSAnLi9taXhpbidcbmltcG9ydCBpc0Rpc3BsYXlDb21wb25lbnQgZnJvbSAnLi9pc0Rpc3BsYXlDb21wb25lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25uZWN0KF9tYXBTdGF0ZVRvUHJvcHMsIF9tYXBEaXNwYXRjaFRvUHJvcHMsIF9tZXJnZVByb3BzLCBfb3B0aW9ucykge1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBfb3B0aW9ucyB8fCB7fTtcblxuICByZXR1cm4gZnVuY3Rpb24oQ29tcG9uZW50KSB7XG5cbiAgICBjb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSBfbWFwU3RhdGVUb1Byb3BzIHx8IENvbXBvbmVudC5wcm90b3R5cGUubWFwU3RhdGVUb1Byb3BzIHx8IGRlZmF1bHRNYXBTdGF0ZVRvUHJvcHM7XG4gICAgY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gX21hcERpc3BhdGNoVG9Qcm9wcyB8fCBDb21wb25lbnQucHJvdG90eXBlLm1hcERpc3BhdGNoVG9Qcm9wcyB8fCBkZWZhdWx0TWFwRGlzcGF0Y2hUb1Byb3BzO1xuICAgIGNvbnN0IG1lcmdlUHJvcHMgPSBfbWVyZ2VQcm9wcyB8fCBDb21wb25lbnQucHJvdG90eXBlLm1lcmdlUHJvcHMgfHwgZGVmYXVsdE1lcmdlUHJvcHM7XG4gICAgY29uc3Qgc3RvcmUgPSBvcHRpb25zLnN0b3JlIHx8IENvbXBvbmVudC5wcm90b3R5cGUuc3RvcmU7XG4gICAgY29uc3QgY29tcG9uZW50SW5pdGlhbGl6ZSA9IENvbXBvbmVudC5wcm90b3R5cGUuaW5pdGlhbGl6ZTtcbiAgICBjb25zdCBjb21wb25lbnRPblJlbmRlciA9IENvbXBvbmVudC5wcm90b3R5cGUub25SZW5kZXI7XG4gICAgY29uc3QgY29tcG9uZW50T25EZXN0cm95ID0gQ29tcG9uZW50LnByb3RvdHlwZS5vbkRlc3Ryb3k7XG5cbiAgICBsZXQgY29ubmVjdE1peGluID0gZGVmYXVsdHMoe30sIHtcblxuICAgICAgaW5pdGlhbGl6ZShfaW5pdE9wdGlvbnMpIHtcblxuICAgICAgICBjb25zdCBpbml0T3B0aW9ucyA9IF9pbml0T3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBtaXhpbi5pbml0aWFsaXplLmNhbGwodGhpcywge1xuICAgICAgICAgIG1hcFN0YXRlVG9Qcm9wcyxcbiAgICAgICAgICBtYXBEaXNwYXRjaFRvUHJvcHMsXG4gICAgICAgICAgbWVyZ2VQcm9wcyxcbiAgICAgICAgICBzdG9yZSxcbiAgICAgICAgICBwcm9wczogaW5pdE9wdGlvbnMucHJvcHNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGNvbXBvbmVudEluaXRpYWxpemUpIHtcbiAgICAgICAgICBjb21wb25lbnRJbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIG9uUmVuZGVyKCkge1xuXG4gICAgICAgIG1peGluLm9uUmVuZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgaWYgKGNvbXBvbmVudE9uUmVuZGVyKSB7XG4gICAgICAgICAgY29tcG9uZW50T25SZW5kZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBvbkRlc3Ryb3koKSB7XG5cbiAgICAgICAgbWl4aW4ub25EZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgaWYgKGNvbXBvbmVudE9uRGVzdHJveSkge1xuICAgICAgICAgIGNvbXBvbmVudE9uRGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgbWl4aW4pO1xuXG4gICAgaWYgKCFpc0Rpc3BsYXlDb21wb25lbnQoQ29tcG9uZW50KSkge1xuICAgICAgY29ubmVjdE1peGluID0gb21pdChjb25uZWN0TWl4aW4sICdvblJlbmRlcicpXG4gICAgfVxuXG4gICAgcmV0dXJuIENvbXBvbmVudC5leHRlbmQoY29ubmVjdE1peGluKVxuICB9XG59XG4iLCJpbXBvcnQgY29ubmVjdCBmcm9tICcuL2Nvbm5lY3QnXG5pbXBvcnQgbWl4aW4gZnJvbSAnLi9taXhpbidcbmltcG9ydCB7IHZlcnNpb24gYXMgVkVSU0lPTiB9IGZyb20gJy4uL3BhY2thZ2UuanNvbidcblxuY29uc3QgTWFyaW9uZXR0ZVJlZHV4ID0ge1xuICBjb25uZWN0LFxuICBtaXhpbixcbiAgVkVSU0lPTlxufVxuXG5leHBvcnQgZGVmYXVsdCBNYXJpb25ldHRlUmVkdXhcbiJdLCJuYW1lcyI6WyJtYXBTdGF0ZVRvUHJvcHMiLCJtYXBEaXNwYXRjaFRvUHJvcHMiLCJkaXNwYXRjaCIsIm1lcmdlUHJvcHMiLCJzdGF0ZVByb3BzIiwiZGlzcGF0Y2hQcm9wcyIsInBhcmVudFByb3BzIiwiZXh0ZW5kIiwiaXNEaXNwbGF5Q29tcG9uZW50IiwiQ29tcG9uZW50IiwiaXNGdW5jdGlvbiIsInByb3RvdHlwZSIsIlZpZXciLCJCZWhhdmlvciIsImlzT2JqZWN0IiwibWl4aW4iLCJfb3B0aW9ucyIsIm9wdGlvbnMiLCJtYXBTdGF0ZSIsImRlZmF1bHRNYXBTdGF0ZVRvUHJvcHMiLCJtYXBEaXNwYXRjaCIsImRlZmF1bHRNYXBEaXNwYXRjaFRvUHJvcHMiLCJkZWZhdWx0TWVyZ2VQcm9wcyIsInByb3BzIiwic3RvcmUiLCJ3aW5kb3ciLCJzdG9yZVN0YXRlIiwiZ2V0U3RhdGUiLCJzdGF0ZSIsImRlZmF1bHRzIiwiZ2V0SW5pdGlhbFN0YXRlIiwiYmluZFN0YXRlRXZlbnRzIiwiY2xlYXJDYWNoZSIsInRyeVN1YnNjcmliZSIsImtleSIsInZhbCIsInVuc2V0Iiwic2lsZW50IiwiY2hhbmdlcyIsImNoYW5naW5nIiwiX2NoYW5naW5nIiwiX3ByZXZpb3VzU3RhdGUiLCJjbG9uZSIsImNoYW5nZWQiLCJjdXJyZW50IiwicHJldiIsIl92YWwiLCJfa2V5IiwiaXNFcXVhbCIsInB1c2giLCJsZW5ndGgiLCJfcGVuZGluZyIsImkiLCJ0cmlnZ2VyIiwidHJpZ2dlckRvbVJlZnJlc2giLCJ0cmlnZ2VyTWV0aG9kIiwiYXR0ciIsImJpbmQiLCJiaW5kRXZlbnRzIiwiYmluZEVudGl0eUV2ZW50cyIsInN0YXRlRXZlbnRzIiwidW5iaW5kIiwidW5iaW5kRXZlbnRzIiwidW5iaW5kRW50aXR5RXZlbnRzIiwiZmluYWxNYXBTdGF0ZVRvUHJvcHMiLCJjb25maWd1cmVGaW5hbE1hcFN0YXRlIiwiZG9TdGF0ZVByb3BzRGVwZW5kT25Pd25Qcm9wcyIsIm1hcHBlZFN0YXRlIiwiaXNGYWN0b3J5IiwiY29tcHV0ZVN0YXRlUHJvcHMiLCJuZXh0U3RhdGVQcm9wcyIsImZpbmFsTWFwRGlzcGF0Y2hUb1Byb3BzIiwiY29uZmlndXJlRmluYWxNYXBEaXNwYXRjaCIsImRvRGlzcGF0Y2hQcm9wc0RlcGVuZE9uT3duUHJvcHMiLCJtYXBwZWREaXNwYXRjaCIsImNvbXB1dGVEaXNwYXRjaFByb3BzIiwibmV4dERpc3BhdGNoUHJvcHMiLCJ1bnN1YnNjcmliZSIsImlzU3Vic2NyaWJlZCIsInN1YnNjcmliZSIsImhhbmRsZUNoYW5nZSIsImhhbmRsZURpc3BhdGNoUHJvcHMiLCJ0cnlVbnN1YnNjcmliZSIsInVuYmluZFN0YXRlRXZlbnRzIiwiaGF2ZUluaXRpYWxTdGF0ZVByb3BzQmVlbkRldGVybWluZWQiLCJoYXZlSW5pdGlhbERpc3BhdGNoUHJvcHNCZWVuRGV0ZXJtaW5lZCIsInVwZGF0ZURpc3BhdGNoUHJvcHNJZk5lZWRlZCIsInByZXZTdG9yZVN0YXRlIiwiaGF2ZVN0YXRlUHJvcHNDaGFuZ2VkIiwidXBkYXRlU3RhdGVQcm9wc0lmTmVlZGVkIiwibWVyZ2VkUHJvcHMiLCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwic2V0U3RhdGUiLCJjb25uZWN0IiwiX21hcFN0YXRlVG9Qcm9wcyIsIl9tYXBEaXNwYXRjaFRvUHJvcHMiLCJfbWVyZ2VQcm9wcyIsImNvbXBvbmVudEluaXRpYWxpemUiLCJpbml0aWFsaXplIiwiY29tcG9uZW50T25SZW5kZXIiLCJvblJlbmRlciIsImNvbXBvbmVudE9uRGVzdHJveSIsIm9uRGVzdHJveSIsImNvbm5lY3RNaXhpbiIsIl9pbml0T3B0aW9ucyIsImluaXRPcHRpb25zIiwiY2FsbCIsImFwcGx5IiwiYXJndW1lbnRzIiwib21pdCIsIk1hcmlvbmV0dGVSZWR1eCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBZSxTQUFTQSxlQUFULEdBQTJCO1NBQ2pDLEVBQVA7OztBQ0RhLFNBQVNDLGtCQUFULENBQTRCQyxRQUE1QixFQUFzQztTQUM1QztjQUNLQTtHQURaOzs7QUNBYSxTQUFTQyxVQUFULENBQW9CQyxVQUFwQixFQUFnQ0MsYUFBaEMsRUFBK0NDLFdBQS9DLEVBQTREO1NBQ2xFQyxrQkFBTyxFQUFQLEVBQVdELFdBQVgsRUFBd0JGLFVBQXhCLEVBQW9DQyxhQUFwQyxDQUFQOzs7QUNDYSxTQUFTRyxrQkFBVCxDQUE0QkMsU0FBNUIsRUFBdUM7TUFDaERDLHNCQUFXRCxTQUFYLENBQUosRUFBMkI7V0FDbEJBLFVBQVVFLFNBQVYsWUFBK0JDLGVBQS9CLElBQXVDSCxVQUFVRSxTQUFWLFlBQStCRSxtQkFBN0U7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"}